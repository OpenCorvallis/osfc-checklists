# Copyright 2024 Oregon State Flying Club
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# This workflow renders the checklist from the PR and uploads them as an
# artifact. The post_comment workflow will then download that artifact and post
# them in a comment on the pull request.

name: Render Checklists
on:
  pull_request:
permissions: {}

jobs:
  render_checklist:
    runs-on: ubuntu-latest
    steps:
      - name: Restore Cached Typst
        id: restore-typst
        uses: actions/cache/restore@v4
        with:
          # Note: `key` will never be an exact match, instead `restore-keys`
          # will match a prefix of the cache.
          key: typst-
          path: ~/.cargo/bin/typst
          restore-keys: typst-

      # If there was a cache miss, build Typst. Also, create the cache_miss file
      # to tell the Post Comment workflow to re-enable the Cache Typst workflow.
      - name: Build Typst
        id: build-typst
        # We can't use cache-hit to detect a cache hit, because cache/restore
        # indicates a miss if only restore-keys matches. Instead, look to see if
        # it output a matched key.
        if: steps.restore-typst.outputs.cache-matched-key == ''
        run: |
          cargo install typst-cli
          mkdir rendered_pr
          touch rendered_pr/cache_miss

      - name: Checkout
        uses: actions/checkout@v4
        with:
          path: osfc-checklists

      # This renders the checklist, and also stashes the git ref and PR number
      # in the artifact so the Post Comment workflows can retrieve them.
      # TODO: Remove hacky font install.
      - name: Render Checklists
        run: |
          mkdir fonts/
          curl --create-dirs -o 'fonts/static/SourceSerif4-ExtraLight.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjipdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-Light.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjiklqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-Regular.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjihdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-Medium.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjiiVqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-SemiBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjisltrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-Bold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjivBtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-ExtraBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjipdtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-Black.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUHf6OAVIJmeUDygwjir5trhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-ExtraLight.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjipdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-Light.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjiklqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-Regular.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjihdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-Medium.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjiiVqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-SemiBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjisltrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-Bold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjivBtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-ExtraBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjipdtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-Black.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvU7f6OAVIJmeUDygwjir5trhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-ExtraLight.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjipdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-Light.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjiklqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-Regular.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjihdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-Medium.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjiiVqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-SemiBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjisltrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-Bold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjivBtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-ExtraBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjipdtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-Black.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUbf2OAVIJmeUDygwjir5trhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-ExtraLight.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjipdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-Light.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjiklqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-Regular.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjihdqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-Medium.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjiiVqrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-SemiBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjisltrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-Bold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjivBtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-ExtraBold.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjipdtrhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-Black.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFy2_tTDB4M7-auWDN0ahZJW3IX2ih5nk3AucvUPf2OAVIJmeUDygwjir5trhxXD-wGvjU.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-ExtraLightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98pxl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-LightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98pGF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-Italic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98pRl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-MediumItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98pdF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-SemiBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98pmFhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-BoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98poVhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-ExtraBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98pxlhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4-BlackItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_US2D2QYxoUKIkn98p71hdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-ExtraLightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98pxl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-LightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98pGF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-Italic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98pRl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-MediumItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98pdF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-SemiBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98pmFhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-BoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98poVhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-ExtraBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98pxlhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_18pt-BlackItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb8kS2D2QYxoUKIkn98p71hdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-ExtraLightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98pxl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-LightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98pGF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-Italic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98pRl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-MediumItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98pdF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-SemiBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98pmFhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-BoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98poVhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-ExtraBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98pxlhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_36pt-BlackItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb-kSGD2QYxoUKIkn98p71hdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-ExtraLightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98pxl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-LightItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98pGF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-Italic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98pRl9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-MediumItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98pdF9dC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-SemiBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98pmFhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-BoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98poVhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-ExtraBoldItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98pxlhdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/static/SourceSerif4_48pt-BlackItalic.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEF02_tTDB4M7-auWDN0ahZJW1ge6NmXpVAHV83Bfb_0SGD2QYxoUKIkn98p71hdC84DrjXEXw.ttf'
          curl --create-dirs -o 'fonts/SourceSerif4-VariableFont_opsz,wght.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFI2_tTDB4M7-auWDN0ahZJW2gc-NaXXq7H.ttf'
          curl --create-dirs -o 'fonts/SourceSerif4-Italic-VariableFont_opsz,wght.ttf' 'https://fonts.gstatic.com/s/sourceserif4/v8/vEFK2_tTDB4M7-auWDN0ahZJW1ge8tK1W77HtMo.ttf'
          mkdir -p rendered_pr/build
          echo ${{ github.event.number }} > rendered_pr/pr_number
          echo PR ${{ github.event.number }} > osfc-checklists/signature.typ
          typst compile --font-path=fonts/ osfc-checklists/66083.typ rendered_pr/build/66083.pdf
          typst compile --font-path=fonts/ osfc-checklists/66083.typ rendered_pr/build/66083_{n}.svg
          typst compile --font-path=fonts/ osfc-checklists/72pe.typ rendered_pr/build/72pe.pdf
          typst compile --font-path=fonts/ osfc-checklists/72pe.typ rendered_pr/build/72pe_{n}.svg
          typst compile --font-path=fonts/ osfc-checklists/73146.typ rendered_pr/build/73146.pdf
          typst compile --font-path=fonts/ osfc-checklists/73146.typ rendered_pr/build/73146_{n}.svg
          cd osfc-checklists
          git rev-parse HEAD > ../rendered_pr/git_ref

      - name: Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: rendered_pr
          path: rendered_pr/
